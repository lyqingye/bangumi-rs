# 通知提醒

通知提醒功能让你能够及时获取 Bangumi-rs 的重要事件通知，如新剧集发布、下载完成等，确保你不会错过任何更新。

## 通知功能概述

Bangumi-rs 的通知系统提供以下功能：

- 实时推送重要事件通知
- 支持多种通知渠道
- 可自定义通知内容和触发条件
- 通知历史记录和管理

## 支持的通知渠道

### Telegram

![设置页面](/screenshot/settings.png)

Telegram 是 Bangumi-rs 目前支持的主要通知渠道，通过 Telegram Bot 发送通知。

设置步骤：

1. 创建一个 Telegram Bot（通过 [@BotFather](https://t.me/BotFather)）
2. 获取 Bot Token
3. 获取你的 Chat ID
4. 在 Bangumi-rs 设置中配置这些信息

通知示例：

```
📺 新剧集通知
番剧: 葬送的芙莉莲
剧集: S01E10
状态: 已添加到下载队列
时间: 2023-09-10 18:30:45
```

### 未来支持的渠道

我们计划在未来版本中添加更多通知渠道：

- **Discord**: 通过 Webhook 发送通知到 Discord 频道
- **Email**: 发送电子邮件通知
- **Slack**: 通过 Webhook 发送通知到 Slack 频道
- **微信**: 通过企业微信或公众号发送通知
- **桌面通知**: 本地桌面通知

## 通知事件类型

Bangumi-rs 可以发送以下类型的通知：

### 番剧相关

- **新剧集发布**: 订阅的番剧有新剧集发布
- **季度开始**: 新的番剧季度开始
- **元数据更新**: 番剧元数据有重要更新

### 下载相关

- **下载开始**: 开始下载新剧集
- **下载完成**: 剧集下载完成
- **下载失败**: 剧集下载失败
- **重试下载**: 系统自动重试下载
- **队列变化**: 下载队列状态变化

### 系统相关

- **系统启动**: Bangumi-rs 系统启动完成
- **系统更新**: 有新版本可用
- **存储警告**: 存储空间不足
- **错误警告**: 系统遇到错误

## 通知设置

在设置页面的 "通知设置" 选项卡中，你可以配置以下选项：

### 基本设置

- **启用/禁用通知**: 总开关，控制是否发送通知
- **通知渠道**: 选择要使用的通知渠道
- **通知频率**: 控制通知的发送频率，避免通知过多

### Telegram 设置

- **Bot Token**: 你的 Telegram Bot 的 Token
- **Chat ID**: 接收通知的聊天 ID
- **测试按钮**: 发送测试消息验证设置

### 事件过滤

- **事件选择**: 选择需要接收通知的事件类型
- **重要性过滤**: 只接收指定重要性级别以上的通知
- **时间过滤**: 设置允许发送通知的时间段

### 通知格式

- **通知模板**: 自定义通知的格式和内容
- **包含详情**: 选择是否在通知中包含详细信息
- **包含图片**: 选择是否在通知中包含图片

## 使用方法

### 配置通知

1. 进入设置页面
2. 选择 "通知" 选项卡
3. 启用通知功能
4. 配置 Telegram Bot Token 和 Chat ID
5. 选择需要接收通知的事件类型
6. 点击 "保存" 按钮

### 测试通知

1. 在通知设置页面点击 "发送测试通知" 按钮
2. 检查是否在 Telegram 中收到测试消息
3. 如果没有收到，检查配置是否正确

### 查看通知历史

1. 进入 "通知历史" 页面
2. 查看所有已发送的通知记录
3. 可以按类型、日期等过滤通知

## 通知工作流程

1. **事件触发**: 系统中发生特定事件
2. **事件过滤**: 根据用户设置过滤事件
3. **通知准备**: 准备通知内容和格式
4. **通知发送**: 通过选定的渠道发送通知
5. **记录存储**: 将通知记录存储在历史记录中

## 最佳实践

- **选择重要事件**: 只接收真正重要的事件通知，避免通知疲劳
- **设置安静时间**: 设置夜间等不希望被打扰的时间段
- **定期清理历史**: 定期清理通知历史记录，保持系统整洁
- **使用专用 Bot**: 为 Bangumi-rs 创建专用的 Telegram Bot，避免与其他服务混淆

## 常见问题

- **没有收到通知怎么办?**

  - 确认通知功能已启用
  - 检查 Bot Token 和 Chat ID 是否正确
  - 确认你已经与 Bot 开始对话
  - 检查是否选择了相应的事件类型

- **通知太多怎么办?**

  - 减少选择的事件类型
  - 提高事件重要性过滤级别
  - 设置通知静默时间段
  - 调整通知频率设置

- **如何在多个设备接收通知?**
  - 将同一个 Telegram Bot 添加到多个聊天或群组中
  - 在设置中配置多个 Chat ID（用逗号分隔）
